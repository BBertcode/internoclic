<!-- test deploy dev -->
<!DOCTYPE html>

<html lang="fr">
<head>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<title>InternoClic</title>
<link href="style.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&amp;family=Pixelify+Sans:wght@400..700&amp;family=Press+Start+2P&amp;family=VT323&amp;display=swap" rel="stylesheet"/>
<!-- IMPORTANT : afficher les retours à la ligne (\n) dans #cp-aza -->
<style>
        #cp-aza { white-space: pre-line; }
    </style>
</head>
<body class="subpage"><header class="site-header"><div class="header-inner"><a aria-label="Retour à l'accueil" class="brand" href="index.html"><img alt="Internoclic" class="brand-logo" src="Images/logo_65px.png"/><span class="brand-name">Internoclic</span></a><nav aria-label="Navigation principale" class="top-nav"><ul class="nav-list"><li class="nav-item"><a class="nav-link" href="cortico.html">Corticothérapie</a></li><li class="nav-item has-dropdown"><button aria-expanded="false" class="nav-trigger" type="button">Immunosuppresseurs <span aria-hidden="true" class="caret">▾</span></button><div class="nav-dropdown"><a class="nav-dd-item" href="azathioprine.html">Azathioprine</a><a class="nav-dd-item" href="mtx.html">Méthotrexate</a><a class="nav-dd-item" href="mycophenolate.html">Mycophénolate mofétyl</a></div></li><li class="nav-item has-dropdown"><button aria-expanded="false" class="nav-trigger" type="button">Biothérapies <span aria-hidden="true" class="caret">▾</span></button><div class="nav-dropdown"><a class="nav-dd-item" href="antitnf.html">Anti-TNF alpha</a></div></li><li class="nav-item has-dropdown"><button aria-expanded="false" class="nav-trigger" type="button">Mesures associées <span aria-hidden="true" class="caret">▾</span></button><div class="nav-dropdown"><a class="nav-dd-item" href="osteoporose.html">Ostéoporose</a><a class="nav-dd-item" href="vaccins.html">Vaccination</a></div></li><li class="nav-item has-dropdown"><button aria-expanded="false" class="nav-trigger" type="button">Bilan diagnostique <span aria-hidden="true" class="caret">▾</span></button><div class="nav-dropdown"><a class="nav-dd-item" href="uveite.html">Uvéites</a></div></li></ul></nav></div></header>
<main class="ordo_liste"><div class="page-card">
<h1>Azathioprine</h1>
<!-- ORDONNANCE -->
<div class="ordo1">
<h3 class="titre-ordo">Ordonnance Azathioprine</h3>
<!-- Variables non copiées -->
<div class="ordo2 no-copy" style="margin-bottom:12px; display:flex; gap:24px; align-items:center;">
<div>
<label for="poids-kg"><strong>Poids (kg) :</strong></label>
<input id="poids-kg" max="250" min="10" placeholder="ex : 70" step="0.1" style="margin-left:8px; width:90px;" type="number"/>
</div>
<div>
<label for="tpmt-status"><strong>Génotypage TPMT :</strong></label>
<select id="tpmt-status" style="margin-left:8px;">
<option selected="" value="normal">Normal</option>
<option value="reduced">Inconnu ou intermédiaire</option>
</select>
</div>
</div>
<!-- Texte copiable (3 lignes) -->
<p class="ordo2" id="ordo-aza">
<span id="premiere-ligne">AZATHIOPRINE comprimé :</span><br/>
<span id="cp-aza"></span>
</p>
<button class="copy-btn">Copier</button>
</div>
<!-- BILAN PRE-THERAPEUTIQUE -->
<div class="ordo1">
<h3 class="titre-ordo">Bilan pré-thérapeutique</h3>
<p class="ordo2">
            Faire réaliser par un laboratoire d'analyses médicales, à jeun, à domicile si besoin :<br/>- Génotypage TPMT<br/>
            - NFP<br/>
            - Ionogramme sanguin, créatinine<br/>
            - ASAT ALAT GGT PAL Bilirubine totale<br/>
            - CRP<br/>
            - Sérologies VIH, VHB, VHC<br/><a class="no-copy" href="https://www.eurofins-biomnis.com/referentiel/liendoc/renseignements/B12-Genetique_Moleculaire.pdf" target="_blank">
                Bon et consentement TPMT – Eurofins Biomnis
            </a>
</p>
<button class="copy-btn">Copier</button>
</div>
<!-- SURVEILLANCE -->
<div class="ordo1">
<h3 class="titre-ordo">Surveillance biologique</h3>
<p class="ordo2">
            Faire réaliser dans un laboratoire, à jeun, à domicile si besoin :<br/>Une fois toutes les 2 semaines pendant 1 mois, puis une fois par mois pendant 3 mois,
            puis une fois tous les 3 mois :<br/>
            - ASAT ALAT<br/>
            - NFP<br/>En plus avant la prochaine consultation :<br/>
            - Ionogramme sanguin, créatinine<br/>
            - CRP<br/>
            - Glycémie à jeun<br/>
            - GGT PAL Bilirubine totale
        </p>
<button class="copy-btn">Copier</button>
</div>
<!-- METABOLITES-->
<div class="ordo1">
<h3 class="titre-ordo">Métabolites (6-TGN / 6-MMP)</h3>
<p class="ordo2">
            Faire réaliser par un laboratoire d'analyses médicales, à domicile si besoin :<br/>Dosage des métabolites de l'azathioprine (6-TGN et 6-MMP).<br/><a class="no-copy" href="https://www.eurofins-biomnis.com/referentiel/liendoc/renseignements/R24-FRC_Dosage-6TGN.pdf" target="_blank">
            Fiche de renseignements (Biomnis)
        </a>
</p>
<button class="copy-btn">Copier</button>
</div>
<!-- INFO PATIENT -->
<div class="ordo1">
<h3 class="titre-ordo">Information patient</h3>
<div class="ordo2">
<li>
<a href="https://www.getaid.org/wp-content/uploads/2025/07/GETAID_AZATHIOPRINE_V4_20200610_version-t%C3%A9l%C3%A9chargeable_20250626.pdf" target="_blank">
                    Fiche patient Azathioprine (GETAID)
                </a>
</li>
</div>
</div>
</div></main>
<script src="script.js"></script>
<script>
    function ceilToNext25(x) {
        return Math.ceil(x / 25) * 25;
    }

    function formatComprimésOptimisé(doseMg) {
        if (!doseMg || doseMg <= 0) return "";

        // Privilégier 50 mg, compléter par 25 mg
        const n50 = Math.floor(doseMg / 50);
        const reste = doseMg % 50; // 0 ou 25 (dose multiple de 25)
        const n25 = reste === 25 ? 1 : 0;

        const parts = [];
        if (n50 > 0) parts.push(`${n50} ${n50 === 1 ? "comprimé" : "comprimés"} de 50 mg`);
        if (n25 > 0) parts.push(`1 comprimé de 25 mg`);

        return parts.join(" + ");
    }

    function computeDoseAzathioprine(poidsKg, tpmtStatus) {
        let dose = ceilToNext25(poidsKg * 2);
        dose = Math.min(dose, 200);

        if (tpmtStatus === "reduced") {
            dose = ceilToNext25(dose / 2);
            dose = Math.min(dose, 100);
        }
        return dose;
    }

    function updateAzathioprineDose() {
        const poidsStr = document.getElementById("poids-kg").value.replace(",", ".");
        const poids = parseFloat(poidsStr);
        const tpmtStatus = document.getElementById("tpmt-status").value;
        const cpSpan = document.getElementById("cp-aza");

        if (!poids || poids <= 0) {
            cpSpan.textContent = "";
            return;
        }

        const dose = computeDoseAzathioprine(poids, tpmtStatus);
        const comp = formatComprimésOptimisé(dose);

        cpSpan.textContent =
            `- ${dose} mg soit ${comp} à prendre le matin à distance d'un laitage (>1h).\n` +
            `- Ne pas associer à de l'allopurinol (Zyloric) ou du fébuxostat (Adénuric).`;
    }

    document.getElementById("poids-kg").addEventListener("input", updateAzathioprineDose);
    document.getElementById("tpmt-status").addEventListener("change", updateAzathioprineDose);

    updateAzathioprineDose();
</script>
</body>
</html>
